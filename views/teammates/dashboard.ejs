<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>TeamDashboard</title>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <script src="https://kit.fontawesome.com/150475fcb8.js" crossorigin="anonymous"></script>
      <link href="https://fonts.googleapis.com/css?family=Poppins:400,500&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="/css/style.css">
  </head>
  <body>
    <header>
      <nav class="navbar navbar-expand-lg fixed-top navbar-light navbar-light"  style="background-color: white;">
    <a class="navbar-brand" href="/teammates/dashboard">Admin Panel</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav">
        <li class="nav-item active">
          <a class="nav-link" href="/teammates/dashboard">Dashboard</a>
        </li>
        <li class="nav-item ">
            <a class="nav-link" href="/teammates/query">UserQueries <span style="border: 1px solid;border-radius: 100%;padding: 5px;background-color: aquamarine;"><%= count %></span></a>
        </li>
      </ul>
      <form class="form-inline my-2 my-lg-0" style="justify-content:flex-end;">
        <a class="nav-link" href="/logout">Logout</a>
      </form>
    </div>
  </nav>
    </header>


<section style="margin-top:100px;">
  <div class="alert alert-success" role="alert" style="text-align:center;">
  WELCOME <%= success%> You can only access to Dashboard and userQueries
</div>
  <h3 style="text-align:center;">Registration Type Wise Details</h3>
  <div class="container" style="margin-top:10px;">
  <div class="row">
    <div class="col-sm d-flex flex-row justify-content-between cl-1">
      <p><i class="fas fa-user  main-i" style="font-size:15px;"></i>Self:</p>
      <p class="self"><%= self %> <i class="fas fa-angle-double-up main-i" style="font-size:15px;"></i></p>
    </div>

    <div class="col-sm d-flex flex-row justify-content-between cl-2">
      <p><i class="fas fa-question main-i" style="font-size:15px;"></i>others:</p>
      <p class="others"><%= others %> <i class="fas fa-angle-double-up main-i" style="font-size:15px;"></i></p>
    </div>
  </div>
</div>
<div class="container">
  <div class="row">
    <div class="col-sm d-flex flex-row justify-content-between cl-3">
      <p><i class="fas fa-users main-i" style="font-size:15px;"></i>Group:</p>
      <p class="group"><%= group %> <i class="fas fa-angle-double-up main-i" style="font-size:15px;"></i></p>
    </div>
    <div class="col-sm d-flex flex-row justify-content-between cl-4">
      <p><i class="fas fa-building main-i" style="font-size:15px;"></i>Corporate:</p>
      <p class="corporate"><%= corporate %> <i class="fas fa-angle-double-up main-i" style="font-size:15px;"></i></p>
    </div>
  </div>
  </div>


</section>
<section style="margin-top:10px;">
  <h3 style="text-align:center;">Event Type Wise Details</h3>
  <div class="container" style="margin-top:10px;">
  <div class="row">
    <div class="col-sm d-flex flex-row justify-content-between cl-1">
      <p><i class="fas fa-code main-i" style="font-size:15px;"></i>Front-end:</p>
      <p class="front "><%= front %> <i class="fas fa-angle-double-up main-i" style="font-size:15px;"></i></p>
    </div>

    <div class="col-sm d-flex flex-row justify-content-between cl-2">
      <p><i class="fas fa-code main-i" style="font-size:15px;"></i>Python:</p>
      <p class="py"><%= py %> <i class="fas fa-angle-double-up main-i" style="font-size:15px;"></i></p>
    </div>

  </div>
  <div class="row">

    <div class="col-md-6 d-flex flex-row justify-content-between cl-3">
      <p><i class="fas fa-code main-i" style="font-size:15px;"></i>JavaScript:</p>
      <p class="js"><%= js %> <i class="fas fa-angle-double-up main-i" style="font-size:15px;"></i></p>
    </div>
  </div>
</div>

</section>
<section style="margin-top:10px;">
  <h3 style="text-align:center;">Tickets and Registration Counts</h3>
  <div class="container" style="margin-top:10px;">
  <div class="row">
    <div class="col-sm d-flex flex-row justify-content-between cl-4">
      <p><i class="fas fa-registered main-i" style="font-size:15px;"></i>Registration:</p>
      <p class="no"><%= total %> <i class="fas fa-angle-double-up main-i" style="font-size:15px;"></i> </p>
      <p class="reg" style="display:none;"><%= total %> </p>
    </div>

    <div class="col-sm d-flex flex-row justify-content-between cl-3">
      <%var sum = 0; var res=[]; for(var i=0;i<=members.length-1;i++){ %>
        <% sum = sum + members[i].ticket; res.push(sum)%>
      <%}%>
      <p><i class="fas fa-ticket-alt main-i" style="font-size:15px;"></i>Ticket: </p>
      <p class="ticket"><%= sum %><i class="fas fa-angle-double-up main-i" style="font-size:15px;"></i></p>
    </div>

  </div>

</div>

</section>

<div class="contains-none" style="display:none;">
  <%var sum = 0; var res=[]; for(var i=0;i<=members.length-1;i++){ %>
    <% res.push( members[i].ticket);%>
  <%}%>
  <p> <%= res %></p>
</div>


<div class="chart">
  <div class="align-chart">
    <div class="chart-containers">

      <canvas id="myChart"></canvas>

    </div>
    <div class="chart-containers">

        <canvas id="myChart1"></canvas>
    </div>
  </div>
</div>
<div class="comparision-chart">
  <div class="chart-container">
    <canvas id="myChart2"></canvas>
  </div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js" charset="utf-8"></script>
<script type="text/javascript">




  let myChart = document.getElementById('myChart').getContext('2d');
  let myChart1 = document.getElementById('myChart1').getContext('2d');
  let myChart2 = document.getElementById('myChart2').getContext('2d');
  var self = parseInt(document.querySelector(".self").innerHTML);
  var group = parseInt(document.querySelector(".group").innerHTML);
  var corporate = parseInt(document.querySelector(".corporate").innerHTML);
  var others = parseInt(document.querySelector(".others").innerHTML);
  var front = parseInt(document.querySelector(".front").innerHTML);

  var py = parseInt(document.querySelector(".py").innerHTML);
  var js = parseInt(document.querySelector(".js").innerHTML);
  var get = document.querySelector(".contains-none p").innerHTML;
  var end = parseInt(document.querySelector(".reg").innerHTML);
  var limit = []
  var s = get.split(",")
  var res =[]
  for(var i=0;i<s.length;i++)
  {
    if(parseInt(s[i])>=0){
      res.push(parseInt(s[i]))
    }
  }
  for(var i = 1;i<=end;i++){
    limit.push("Reg:"+i)
  }
  console.log(limit)


Chart.defaults.global.defaultFontFamily = 'Lato';
Chart.defaults.global.defaultFontSize = 18;
Chart.defaults.global.defaultFontColor = '#777';

let regChart = new Chart(myChart, {
type:'doughnut',
data:{
  labels:['Self', 'Group','Corporate','Others'],
  datasets:[{
    label:'Registration',
    data:[self,group,corporate,others],

    backgroundColor:[
      '#398bf7',
      '#7460ee',
      '#06d79c',
      '#ef5350'
    ],
    borderWidth:1,

    hoverBorderWidth:3,

  }]
},
options:{
  title:{
    display:true,
    text:'Types of Registration',
    fontSize:25
  },
  legend:{
    display:true,
    position:'right',
    labels:{
      fontColor:'#000'
    }
  },
  layout:{
    padding:{
      left:50,
      right:0,
      bottom:0,
      top:0
    }
  },
  tooltips:{
    enabled:true
  },



}
});

let event_Chart = new Chart(myChart1, {
type:'bar',
data:{
  labels:['Front-End','Python','JavaScript'],
  datasets:[{

    data:[front,py,js],

    backgroundColor:[
      '#398bf7',
      '#7460ee',
      '#06d79c',
      '#ef5350'
    ],
    borderWidth:1,
    borderColor:'#777',
    hoverBorderWidth:3,
    hoverBorderColor:'#000'
  }]
},
options:{
  title:{
    display:true,
    text:'Types of Event',
    fontSize:25
  },
  legend:{
    display:true,
    position:'right',
    labels:{
      fontColor:'black'
    }
  },
  layout:{
    padding:{
      left:50,
      right:0,
      bottom:0,
      top:0
    }
  },
  tooltips:{
    enabled:true
  },
  scales: {
   yAxes: [{

       ticks: {
           suggestedMin: 0   // minimum will be 0, unless there is a lower value.

       }
   }]
}



}
});
let compareChart = new Chart(myChart2, {
type:'line',
data:{
  labels:limit,
  datasets:[{
    label:'ticket',
    data:res,
    borderColor:'#398bf7',
    borderWidth:1,
    hoverBorderWidth:3,
    hoverBorderColor:'#398bf7'
  }]
},
options:{
  title:{
    display:true,
    text:'Tickets per Registration',
    fontSize:25
  },
  legend:{
    display:true,
    position:'right',
    labels:{
      fontColor:'#000'
    }
  },
  layout:{
    padding:{
      left:50,
      right:0,
      bottom:0,
      top:0
    }
  },
  tooltips:{
    enabled:true
  },



}
});
function SideClose(){

var x = document.querySelector(".side");
if (x.style.display === "none") {
x.style.display = "block";
} else {

x.style.display = "none"
}


}
function Open(){

var x = document.querySelector(".lig-dark");
if (x.style.display === "none") {
x.style.display = "block";
} else {

x.style.display = "none"
}
}
function BgDark(){
 document.body.style.backgroundImage = "url('/images/dark.png')";
}
function FilterChart(){
 var l = document.querySelector(".limit").value;
 end = l;
}

</script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
          <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
          <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

  </body>
</html>
